{% extends "base.html" %}

{% block title %}Полезная информация{% endblock %}

{% block content %}
<div class="card">
    <h2>Добавить раздел</h2>
    <form method="POST" action="/info/add">
        <label for="section">Категория:</label>
        <input type="text" id="section" name="section" placeholder="Например: Роспись" required>
        
        <label for="title">Заголовок:</label>
        <input type="text" id="title" name="title" required>
        
        <label for="content">Содержание:</label>
        <textarea id="content" name="content" required></textarea>
        
        <label for="order_index">Порядок отображения:</label>
        <input type="text" id="order_index" name="order_index" value="0" required>
        
        <button type="submit" class="btn">Добавить</button>
    </form>
</div>

<div class="card">
    <h2>Разделы информации</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Категория</th>
                <th>Заголовок</th>
                <th>Содержание</th>
                <th>Порядок</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for section in sections %}
            <tr>
                <td>{{ section.id }}</td>
                <td>{{ section.section }}</td>
                <td>{{ section.title }}</td>
                <td>{{ section.content[:50] }}{% if section.content|length > 50 %}...{% endif %}</td>
                <td>{{ section.order_index }}</td>
                <td>
                    <form method="POST" action="/info/{{ section.id }}/delete" style="display: inline;">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('Удалить раздел?')">Удалить</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
