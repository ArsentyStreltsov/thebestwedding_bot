{% extends "base.html" %}

{% block title %}–í–∏—à-–ª–∏—Å—Ç{% endblock %}

{% block extra_css %}
<style>
    .wishlist-form input[type="text"],
    .wishlist-form input[type="number"],
    .wishlist-form textarea {
        width: 100%;
        box-sizing: border-box;
    }
    .wishlist-table input[type="text"],
    .wishlist-table input[type="number"],
    .wishlist-table textarea {
        width: 100%;
        box-sizing: border-box;
        font-size: 0.9rem;
    }
    .wishlist-table td {
        vertical-align: top;
    }
    .wishlist-actions {
        display: flex;
        gap: 0.25rem;
        flex-wrap: wrap;
    }
    .wishlist-actions .btn,
    .wishlist-actions .btn-danger {
        padding: 4px 8px;
        font-size: 0.8rem;
    }
    .wishlist-order-input {
        max-width: 80px;
    }
</style>
{% endblock %}

{% block content %}
<div class="card">
    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
    <form method="POST" action="/wishlist/add" class="wishlist-form">
        <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
        <input type="text" id="name" name="name" required>
        
        <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
        <textarea id="description" name="description"></textarea>
        
        <label for="price_hint">–°—Ç–æ–∏–º–æ—Å—Ç—å:</label>
        <input type="text" id="price_hint" name="price_hint" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 5 000 ‚ÇΩ">
        
        <label for="link">–°—Å—ã–ª–∫–∏:</label>
        <input type="text" id="link" name="link" placeholder="–°—Å—ã–ª–∫–∞ 1 (https://...)">
        <input type="text" id="link2" name="link2" placeholder="–°—Å—ã–ª–∫–∞ 2 (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        
        <label for="order_index">–ü–æ—Ä—è–¥–æ–∫ –≤ —Å–ø–∏—Å–∫–µ:</label>
        <input type="number" id="order_index" name="order_index" min="0" placeholder="–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ">
        
        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
</div>

<div class="card">
    <h2>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h2>
    <table class="wishlist-table">
        <thead>
            <tr>
                <th>#</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                <th>–°—Å—ã–ª–∫–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–ü–æ—Ä—è–¥–æ–∫</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>
                    <form method="POST" action="/wishlist/{{ item.id }}/edit">
                        <input type="text" name="name" value="{{ item.name }}" required>
                </td>
                <td>
                        <textarea name="description" rows="2">{{ item.description }}</textarea>
                </td>
                <td>
                        <input type="text" name="price_hint" value="{{ item.price_hint or '' }}" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 5 000 ‚ÇΩ">
                </td>
                <td>
                        <input type="text" name="link" value="{{ item.link or '' }}" placeholder="–°—Å—ã–ª–∫–∞ 1 (https://...)">
                        <input type="text" name="link2" value="{{ item.link2 or '' }}" placeholder="–°—Å—ã–ª–∫–∞ 2 (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                </td>
                <td>
                    {% if item.is_taken %}‚úÖ –≠—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ –∫—Ç–æ-—Ç–æ —É–∂–µ –≤—ã–±—Ä–∞–ª{% else %}üõí –î–æ—Å—Ç—É–ø–Ω–æ{% endif %}
                </td>
                <td>
                        <input type="number" name="order_index" value="{{ item.order_index or 0 }}" min="0" class="wishlist-order-input">
                </td>
                <td>
                    <div class="wishlist-actions">
                        <button type="submit" class="btn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å">üíæ</button>
                    </form>
                    <form method="POST" action="/wishlist/{{ item.id }}/delete">
                        <button type="submit" class="btn btn-danger" title="–£–¥–∞–ª–∏—Ç—å" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä?')">üóë</button>
                    </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
